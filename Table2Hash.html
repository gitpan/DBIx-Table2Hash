<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>C&lt;DBIx::Table2Hash&gt; - Read a database table into a hash</title>
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#version">Version</a></li>
	<li><a href="#synopsis">Synopsis</a></li>
	<li><a href="#description">Description</a></li>
	<li><a href="#constructor_and_initialization">Constructor and initialization</a></li>
	<li><a href="#method:_new(...)">Method: <code>new(...)</code></a></li>
	<li><a href="#method:_select()">Method: <code>select()</code></a></li>
	<li><a href="#required_modules">Required Modules</a></li>
	<li><a href="#changes">Changes</a></li>
	<li><a href="#faq">FAQ</a></li>
	<li><a href="#author">Author</a></li>
	<li><a href="#copyright">Copyright</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p><code>DBIx::Table2Hash</code> - Read a database table into a hash</p>
<p>
</p>
<hr />
<h1><a name="version">Version</a></h1>
<p>This document refers to version 1.00 of <code>DBIx::Table2Hash</code>, released 8-Jan-2003.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">Synopsis</a></h1>
<pre>
        #!/usr/bin/perl</pre>
<pre>
        my($hash_ref) = DBIx::Table2Hash -&gt; new
        (
                dbh          =&gt; $dbh,
                table_name   =&gt; $table_name,
                key_column   =&gt; 'name',
                value_column =&gt; 'id'
        ) -&gt; select();</pre>
<p>
</p>
<hr />
<h1><a name="description">Description</a></h1>
<p><code>DBIx::Table2Hash</code> is a pure Perl module.</p>
<p>This module reads a database table and stores keys and values in a hash. The resultant hash is not nested in any way.</p>
<p>The aim is to create a hash which is a simple look-up table. To this end, the module allows the key_column to point to
an SQL expression.</p>
<p>
</p>
<hr />
<h1><a name="constructor_and_initialization">Constructor and initialization</a></h1>
<p><code>new(...)</code> returns a <code>DBIx::Table2Hash</code> object.</p>
<p>This is the class's contructor.</p>
<p>Parameters:</p>
<ul>
<li></li>
dbh
<p>A database handle.</p>
<p></p>
<li></li>
table_name
<p>The name of the table to select from.</p>
<p></p>
<li></li>
key_column
<p>The name of the column, or SQL expression, to use for hash keys.</p>
<p>Say you have 2 columns, called col_a and col_b. Then you can concatenate them with:</p>
<p>key_column =&gt; 'concat(col_a, col_b)'</p>
<p>or, even fancier,</p>
<p>key_column =&gt; ``concat(col_a, '-', col_b)''</p>
<p></p>
<li></li>
value_column
<p>The name of the column to use for hash values.</p>
<p></p>
<li></li>
where
<p>The optional where clause, including the word 'where', to add to the select.</p>
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="method:_new(...)">Method: <code>new(...)</code></a></h1>
<p>Returns a object of type <code>DBIx::Table2Hash</code>.</p>
<p>See above, in the section called 'Constructor and initialization'.</p>
<p>
</p>
<hr />
<h1><a name="method:_select()">Method: <code>select()</code></a></h1>
<p>Returns a hash ref.</p>
<p>Calling <code>select()</code> actually executes the SQL select statement, and builds the hash.</p>
<p>
</p>
<hr />
<h1><a name="required_modules">Required Modules</a></h1>
<p>DBI, so you can provide a database handle.</p>
<p>
</p>
<hr />
<h1><a name="changes">Changes</a></h1>
<p>See Changes.txt.</p>
<p>
</p>
<hr />
<h1><a name="faq">FAQ</a></h1>
<p>Q: What is the point of this module?</p>
<p>A: To be able to restore a hash from a database rather than from a file.</p>
<p>Q: Can your other module <code>DBIx::Hash2Table</code> be used to save the hash back to the database?</p>
<p>A: Sure.</p>
<p>Q: Are there any other modules with similar capabilities?</p>
<p>A: Yes:</p>
<ul>
<li></li>
<code>DBIx::Lookup::Field</code>
<p>Quite similar.</p>
<p></p>
<li></li>
<code>DBIx::TableHash</code>
<p>This module takes a very long set of parameters, but unfortunately does not take a database handle.</p>
<p>It does mean the module, being extremely complex, can read in more than one column as the value of a hash key, and it
has caching abilities too.</p>
<p>It works by tieing a hash to an MySQL table, and hence supports writing to the table. It uses MySQL-specific code,
for example, when it locks tables.</p>
<p>Unfortunately, it does not use data binding, so it cannot handle data which contains single quotes!</p>
<p>Further, it uses /^\w+$/ to 'validate' column names, so it cannot accept an SQL expression instead of a column name.</p>
<p>Lastly, it also uses /^\w+$/ to 'validate' table names, so it cannot accept table names and views containing spaces
and other 'funny' characters, eg '&amp;' (both of which I have to deal with under MS Access).</p>
<p></p>
<li></li>
<code>DBIx::Tree</code>
<p>This module is more like the inverse of <code>DBIx::Hash2Table</code>, in that it assumes you are building a nested hash.</p>
<p>As it reads the database table it calls a call-back sub, which you use to process the rows of the table.</p>
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="author">Author</a></h1>
<p><code>DBIx::Table2Hash</code> was written by Ron Savage <em>&lt;<a href="mailto:ron@savage.net.au">ron@savage.net.au</a>&gt;</em> in 2003.</p>
<p>Home page: <a href="http://savage.net.au/index.html">http://savage.net.au/index.html</a></p>
<p>
</p>
<hr />
<h1><a name="copyright">Copyright</a></h1>
<p>Australian copyright (c) 2003, Ron Savage. All rights reserved.</p>
<pre>
        All Programs of mine are 'OSI Certified Open Source Software';
        you can redistribute them and/or modify them under the terms of
        The Artistic License, a copy of which is available at:
        <a href="http://www.opensource.org/licenses/index.html">http://www.opensource.org/licenses/index.html</a></pre>

</body>

</html>
